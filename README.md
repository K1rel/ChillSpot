# ChillSpot

ChillSpot е мобилна апликација базирана на Flutter за откривање, споделување и оценување на интересни места ("spots") со пријателите. Апликацијата нуди автентикација, уредување на профил, интерактивна мапа, систем за пријатели и беџови, и уште многу повеќе.

## Функционалности

### Кориснички профил и автентикација
- **Регистрација и најава:** Креирај нов профил или најави се со е-пошта, корисничко име и лозинка.
- **Уредување профил:** Промени корисничко име, е-пошта и профилна слика.
- **Ресетирање лозинка:** Побарај е-пошта за ресетирање и постави нова лозинка со код.

### Мапа и места (Spots)
- **Интерактивна мапа:** Истражувај места преку OpenStreetMap.
- **Додавање места:** Зачувај нови места со детали, слики (дневна/ноќна) и информации за времето.
- **Детали за место:** Прегледај информации, слики и рецензии за секое место.
- **Посетени места:** Следи и прегледај ги местата што си ги посетил.
- **Места на пријатели:** Види ги местата што ги имаат додадено твоите пријатели.

### Социјални функции
- **Систем за пријатели:** Пребарувај корисници, праќај/прифаќај/одбивај барања за пријателство и види ги местата на пријателите.
- **Беџови:** Освојувај беџови за различни активности и достигнувања.
- **Лидерборд:** Натпреварувај се со пријателите според XP и беџови.

### Рецензии
- **Оценување места:** Пиши, уредувај и бриши рецензии за места.
- **Преглед на рецензии:** Види ги сите рецензии за место и твојата историја на рецензии.

### Гамификација
- **XP и нивоа:** Освојувај XP за активности (на пр. посетени места) и напредувај по нивоа.
- **Беџови:** Освојувај беџови за специјални достигнувања.

## Технологии
- **Flutter** (Dart)
- **REST API** (backend)
- **OpenStreetMap**
- **SQLite/SharedPreferences** (локално складирање)

## Како да започнете
1. Клонирај го репозиториумот.
2. Инсталирај ги зависностите со `flutter pub get`.
3. Постави ги .env вредностите.
4. Стартувај ја апликацијата со `flutter run`.


# Backend документација

Ова е backend делот на апликацијата ChillSpot, имплементиран на Go (Golang) со REST API архитектура, користејќи PostgreSQL база и GORM ORM. Овој сервер обезбедува сите потребни функционалности за кориснички профили, пријатели, места (spots), беџови, рецензии, XP систем и повеќе.

## Главни Технологии

- **Go (Golang)** — главен програмски јазик
- **Gorilla Mux** — HTTP router за API рутирање
- **GORM** — ORM за работа со PostgreSQL база
- **PostgreSQL** — релациона база на податоци
- **JWT (JSON Web Tokens)** — заштита на API и автентикација
- **bcrypt** — хаширање на лозинки
- **Mailtrap SMTP** — испраќање email за ресетирање лозинка
- **Docker** — за лесно подигнување на сервисите

## Структура на кодот

backend/
│
├── go.mod / go.sum         # Go модули и зависности
├── Dockerfile              # Docker конфигурација
└── internal/
    ├── main.go             # Entry point, setup на серверот и миграции
    ├── models/             # GORM модели (User, Spot, Review, Badge, ...)
    ├── handlers/           # HTTP handler-и за сите API рути
    ├── routes/             # Дефиниција на сите API рути
    ├── middleware/         # CORS, JWT и други middleware-и
    ├── auth/               # JWT utility функции
    ├── db/                 # Конекција и конфигурација на базата
    ├── mailer/             # Email испраќање (ресетирање лозинка)
    ├── uploads/            # Директориум за upload-ирани профилни слики
    ├── images/             # Директориум за upload-ирани слики од места


## Главни Функционалности

### 1. Кориснички профил и автентикација
- **Регистрација и најава:** `/register`, `/login`
- **JWT токени:** Секој корисник добива токен по најава/регистрација
- **Промена и преглед на профил:** `/profile` (GET/PUT)
- **Промена на профилна слика:** upload преку multipart/form-data
- **Ресетирање лозинка:** `/forgot-password`, `/reset-password` (со email)

### 2. Места (Spots)
- **Додавање место:** `/spots` (POST, со upload на слики)
- **Преглед на свои места:** `/spots/user`
- **Детали за место:** `/spots/{id}`
- **Лајк и посета:** `/spots/{id}/like`, `/spots/{id}/visit`
- **Проверка на близина:** `/spots/check-proximity`

### 3. Рецензии
- **Креирање, уредување, бришење:** `/reviews`, `/reviews/{id}`
- **Преглед на рецензии за место:** `/reviews/spot/{spotId}`
- **Преглед на свои рецензии:** `/reviews/user`

### 4. Пријатели и социјални функции
- **Барање, прифаќање, одбивање пријателство:** `/friends/request`, `/friends/accept`, `/friends/decline`
- **Пребарување корисници:** `/friends/search`
- **Преглед на пријатели и нивни места:** `/friends`, `/friends/spots`
- **Преглед на барања за пријателство:** `/friends/requests`

### 5. Беџови и XP систем
- **Проверка и добивање беџови:** `/badges/check`, `/badges`
- **XP се добива за активности (посета, лајк, рецензија, ...)**

### 6. Посетени места
- **Додавање и преглед:** `/visited-spots` (POST/GET)

## Како функционира

- **main.go**: Стартува сервер, прави миграции, иницијализира mailer, ги подготвува upload директориумите и ги поврзува сите рути.
- **routes.go**: Ги дефинира сите API рути и ги групира заштитените рути (со JWT middleware).
- **handlers/**: Содржи handler-и за секоја рута (автентикација, профил, места, пријатели, беџови, рецензии...).
- **models/**: GORM модели за сите ентитети (User, Spot, Review, Badge, FriendRequest, ...).
- **middleware/**: CORS и JWT middleware за заштита и cross-origin пристап.
- **auth/**: Utility за генерирање и валидација на JWT токени.
- **mailer/**: Utility за испраќање email пораки (ресетирање лозинка).

## Како да стартувате

1. Поставете ги .env вредностите (DB_URL, MAILTRAP_USERNAME, MAILTRAP_PASSWORD, ...).
2. Инсталирајте ги зависностите со `go mod tidy`.
3. Стартувајте ја базата (на пр. преку Docker Compose).
4. Стартувајте го серверот со `go run internal/main.go` или преку Docker.


